<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Ticaret API DokÃ¼mantasyonu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --text-color: #1f2937;
            --bg-color: #ffffff;
            --code-bg: #1e293b;
            --border-color: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background-color: #f8fafc;
            border-right: 1px solid var(--border-color);
            padding: 2rem;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .content {
            flex: 1;
            padding: 2rem;
            margin-left: 280px;
            max-width: 1200px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-item {
            margin-bottom: 0.5rem;
        }

        .nav-link {
            color: var(--text-color);
            text-decoration: none;
            display: block;
            padding: 0.5rem;
            border-radius: 0.375rem;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background-color: #e2e8f0;
        }

        h1, h2, h3 {
            color: var(--text-color);
            margin: 1.5rem 0 1rem;
        }

        h1 {
            font-size: 2.25rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.75rem;
        }

        h3 {
            font-size: 1.25rem;
        }

        p {
            margin-bottom: 1rem;
        }

        .card {
            background-color: #f8fafc;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .alert {
            background-color: #fef3c7;
            border: 1px solid #fcd34d;
            color: #92400e;
            padding: 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }

        code {
            background-color: var(--code-bg);
            color: #e5e7eb;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: 'Fira Code', monospace;
        }

        pre {
            background-color: var(--code-bg);
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .badge {
            background-color: var(--primary-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            margin-left: 0.5rem;
        }

        .endpoint {
            display: flex;
            align-items: center;
            background-color: var(--code-bg);
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }

        .method {
            font-weight: bold;
            margin-right: 1rem;
        }

        .method.get { color: #22c55e; }
        .method.post { color: #3b82f6; }
        .method.put { color: #f59e0b; }
        .method.delete { color: #ef4444; }

        .path {
            color: #e5e7eb;
            font-family: 'Fira Code', monospace;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            text-align: left;
        }

        th {
            background-color: #f8fafc;
        }

        .env-table code {
            background-color: #334155;
        }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">
                ğŸ“¦ E-Ticaret API
            </div>
            <nav>
                <div class="nav-item">
                    <a href="#baslangic" class="nav-link">ğŸš€ BaÅŸlangÄ±Ã§</a>
                </div>
                <div class="nav-item">
                    <a href="#kurulum" class="nav-link">âš™ï¸ Kurulum</a>
                </div>
                <div class="nav-item">
                    <a href="#moduller" class="nav-link">ğŸ”§ ModÃ¼ller</a>
                </div>
                <div class="nav-item">
                    <a href="#auth" class="nav-link">ğŸ” Kimlik DoÄŸrulama</a>
                </div>
                <div class="nav-item">
                    <a href="#products" class="nav-link">ğŸ“¦ ÃœrÃ¼nler</a>
                </div>
                <div class="nav-item">
                    <a href="#orders" class="nav-link">ğŸ›ï¸ SipariÅŸler</a>
                </div>
                <div class="nav-item">
                    <a href="#notifications" class="nav-link">ğŸ”” Bildirimler</a>
                </div>
                <div class="nav-item">
                    <a href="#payment" class="nav-link">ğŸ’³ Ã–deme</a>
                </div>
            </nav>
        </aside>

        <main class="content">
            <h1>E-Ticaret API DokÃ¼mantasyonu</h1>
            
            <section id="baslangic">
                <h2>ğŸš€ BaÅŸlangÄ±Ã§</h2>
                <div class="card">
                    <p>Bu API, modern bir e-ticaret platformu iÃ§in geliÅŸtirilmiÅŸ kapsamlÄ± bir backend Ã§Ã¶zÃ¼mÃ¼dÃ¼r. NestJS framework'Ã¼ Ã¼zerine inÅŸa edilmiÅŸ olup, MongoDB veritabanÄ±nÄ± kullanmaktadÄ±r.</p>
                    
                    <h3>Ã–zellikler</h3>
                    <ul>
                        <li>ğŸ” JWT tabanlÄ± kimlik doÄŸrulama</li>
                        <li>ğŸ“¦ ÃœrÃ¼n yÃ¶netimi</li>
                        <li>ğŸ›ï¸ SipariÅŸ iÅŸlemleri</li>
                        <li>ğŸ’³ Stripe entegrasyonu ile Ã¶deme iÅŸlemleri</li>
                        <li>ğŸ”” WebSocket tabanlÄ± gerÃ§ek zamanlÄ± bildirimler</li>
                        <li>ğŸ“Š Stok yÃ¶netimi</li>
                        <li>ğŸ‘¥ KullanÄ±cÄ± yÃ¶netimi</li>
                    </ul>
                </div>
            </section>

            <section id="kurulum">
                <h2>âš™ï¸ Kurulum</h2>
                
                <h3>Gereksinimler</h3>
                <div class="card">
                    <ul>
                        <li>Node.js (v16 veya Ã¼zeri)</li>
                        <li>MongoDB (v4.4 veya Ã¼zeri)</li>
                        <li>npm veya yarn</li>
                    </ul>
                </div>

                <h3>Ortam DeÄŸiÅŸkenleri</h3>
                <div class="card">
                    <p>Projenin kÃ¶k dizininde <code>.env</code> dosyasÄ± oluÅŸturun ve aÅŸaÄŸÄ±daki deÄŸiÅŸkenleri tanÄ±mlayÄ±n:</p>
                    <table class="env-table">
                        <tr>
                            <th>DeÄŸiÅŸken</th>
                            <th>AÃ§Ä±klama</th>
                            <th>Ã–rnek DeÄŸer</th>
                        </tr>
                        <tr>
                            <td><code>MONGODB_URI</code></td>
                            <td>MongoDB baÄŸlantÄ± adresi</td>
                            <td><code>mongodb://localhost:27017/ecommerce</code></td>
                        </tr>
                        <tr>
                            <td><code>JWT_SECRET</code></td>
                            <td>JWT token ÅŸifreleme anahtarÄ±</td>
                            <td><code>your-secret-key</code></td>
                        </tr>
                        <tr>
                            <td><code>JWT_EXPIRATION</code></td>
                            <td>Token geÃ§erlilik sÃ¼resi</td>
                            <td><code>24h</code></td>
                        </tr>
                        <tr>
                            <td><code>STRIPE_SECRET_KEY</code></td>
                            <td>Stripe API anahtarÄ±</td>
                            <td><code>sk_test_...</code></td>
                        </tr>
                        <tr>
                            <td><code>STRIPE_WEBHOOK_SECRET</code></td>
                            <td>Stripe Webhook gizli anahtarÄ±</td>
                            <td><code>whsec_...</code></td>
                        </tr>
                    </table>
                </div>

                <h3>Kurulum AdÄ±mlarÄ±</h3>
                <div class="card">
                    <pre><code class="language-bash"># Projeyi klonlayÄ±n
git clone https://github.com/username/ecommerce-api.git

# BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kleyin
npm install

# GeliÅŸtirme modunda baÅŸlatÄ±n
npm run start:dev

# Veya production modunda baÅŸlatÄ±n
npm run start:prod</code></pre>
                </div>
            </section>

            <section id="moduller">
                <h2>ğŸ”§ ModÃ¼ller</h2>
                
                <div class="card">
                    <h3>Auth Module</h3>
                    <p>KullanÄ±cÄ± kimlik doÄŸrulama ve yetkilendirme iÅŸlemlerini yÃ¶netir.</p>
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/auth/login</span>
                    </div>
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/auth/register</span>
                    </div>
                </div>

                <div class="card">
                    <h3>Products Module</h3>
                    <p>ÃœrÃ¼n yÃ¶netimi ve stok kontrolÃ¼ iÅŸlemlerini yÃ¶netir.</p>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="path">/products</span>
                    </div>
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/products</span>
                    </div>
                </div>

                <div class="card">
                    <h3>Orders Module</h3>
                    <p>SipariÅŸ iÅŸlemlerini yÃ¶netir.</p>
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/orders</span>
                    </div>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="path">/orders/:id</span>
                    </div>
                </div>

                <div class="card">
                    <h3>Notifications Module</h3>
                    <p>WebSocket Ã¼zerinden gerÃ§ek zamanlÄ± bildirim yÃ¶netimi.</p>
                    <div class="alert">
                        WebSocket baÄŸlantÄ±sÄ± iÃ§in JWT token gereklidir.
                    </div>
                    <pre><code class="language-javascript">// WebSocket baÄŸlantÄ± Ã¶rneÄŸi
const socket = io('ws://localhost:3000', {
  extraHeaders: {
    Authorization: `Bearer ${jwtToken}`
  }
});</code></pre>
                </div>

                <div class="card">
                    <h3>Payment Module</h3>
                    <p>Stripe entegrasyonu ile Ã¶deme iÅŸlemlerini yÃ¶netir.</p>
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/payment/process</span>
                    </div>
                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/payment/webhook</span>
                    </div>
                </div>
            </section>

            <section id="auth">
                <h2>ğŸ” Kimlik DoÄŸrulama</h2>
                <div class="card">
                    <h3>JWT KullanÄ±mÄ±</h3>
                    <p>API isteklerinde JWT token'Ä± Authorization header'Ä±nda gÃ¶nderilmelidir:</p>
                    <pre><code class="language-javascript">fetch('/api/products', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});</code></pre>
                </div>
            </section>

            <section id="websocket">
                <h2>ğŸ”Œ WebSocket BaÄŸlantÄ±sÄ±</h2>
                <div class="card">
                    <p>Bildirimler iÃ§in WebSocket baÄŸlantÄ±sÄ± gereklidir. BaÄŸlantÄ± Ã¶rneÄŸi:</p>
                    <pre><code class="language-typescript">import { io } from 'socket.io-client';

const socket = io('ws://localhost:3000', {
  extraHeaders: {
    Authorization: `Bearer ${jwtToken}`
  }
});

socket.on('notification', (data) => {
  console.log('Yeni bildirim:', data);
});</code></pre>
                </div>
            </section>

            <section id="products">
                <h2>ğŸ“¦ ÃœrÃ¼nler</h2>
                <div class="card">
                    <h3>ÃœrÃ¼n Ä°ÅŸlemleri</h3>
                    <p>ÃœrÃ¼n yÃ¶netimi ve stok kontrolÃ¼ iÅŸlemlerini yÃ¶netir. TÃ¼m Ã¼rÃ¼n iÅŸlemleri iÃ§in JWT token gereklidir.</p>
                    
                    <h4>Endpoints</h4>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="path">/products</span>
                        <span class="badge">TÃ¼m Ã¼rÃ¼nleri listele</span>
                    </div>
                    <pre><code class="language-javascript">// Ã–rnek Response
{
  "data": [
    {
      "id": "123",
      "name": "iPhone 13",
      "description": "Apple iPhone 13",
      "price": 999.99,
      "stock": 50,
      "category": "electronics",
      "images": ["url1", "url2"],
      "createdAt": "2024-02-24T20:00:00Z"
    }
  ],
  "total": 1,
  "page": 1,
  "limit": 10
}</code></pre>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="path">/products/:id</span>
                        <span class="badge">Tek Ã¼rÃ¼n detayÄ±</span>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/products</span>
                        <span class="badge">Yeni Ã¼rÃ¼n ekle</span>
                    </div>
                    <pre><code class="language-javascript">// Ã–rnek Request Body
{
  "name": "iPhone 13",
  "description": "Apple iPhone 13",
  "price": 999.99,
  "stock": 50,
  "category": "electronics",
  "images": ["url1", "url2"]
}</code></pre>

                    <div class="endpoint">
                        <span class="method put">PUT</span>
                        <span class="path">/products/:id</span>
                        <span class="badge">ÃœrÃ¼n gÃ¼ncelle</span>
                    </div>

                    <div class="endpoint">
                        <span class="method delete">DELETE</span>
                        <span class="path">/products/:id</span>
                        <span class="badge">ÃœrÃ¼n sil</span>
                    </div>

                    <div class="endpoint">
                        <span class="method patch">PATCH</span>
                        <span class="path">/products/:id/stock</span>
                        <span class="badge">Stok gÃ¼ncelle</span>
                    </div>
                    <pre><code class="language-javascript">// Ã–rnek Request Body
{
  "stock": 45,  // Yeni stok miktarÄ±
  "operation": "decrease"  // "increase" veya "decrease"
}</code></pre>
                </div>
            </section>

            <section id="orders">
                <h2>ğŸ›ï¸ SipariÅŸler</h2>
                <div class="card">
                    <h3>SipariÅŸ Ä°ÅŸlemleri</h3>
                    <p>SipariÅŸ oluÅŸturma, gÃ¼ncelleme ve takip iÅŸlemlerini yÃ¶netir. TÃ¼m sipariÅŸ iÅŸlemleri iÃ§in JWT token gereklidir.</p>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/orders</span>
                        <span class="badge">Yeni sipariÅŸ oluÅŸtur</span>
                    </div>
                    <pre><code class="language-javascript">// Ã–rnek Request Body
{
  "items": [
    {
      "productId": "123",
      "quantity": 2
    }
  ],
  "shippingAddress": {
    "street": "AtatÃ¼rk Cad.",
    "city": "Ä°stanbul",
    "country": "TÃ¼rkiye",
    "zipCode": "34100"
  },
  "paymentMethod": "stripe"
}</code></pre>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="path">/orders</span>
                        <span class="badge">SipariÅŸleri listele</span>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <span class="path">/orders/:id</span>
                        <span class="badge">SipariÅŸ detayÄ±</span>
                    </div>

                    <div class="endpoint">
                        <span class="method patch">PATCH</span>
                        <span class="path">/orders/:id/status</span>
                        <span class="badge">SipariÅŸ durumu gÃ¼ncelle</span>
                    </div>
                    <pre><code class="language-javascript">// Ã–rnek Request Body
{
  "status": "shipped"  // pending, paid, shipped, delivered, cancelled
}</code></pre>
                </div>
            </section>

            <section id="notifications">
                <h2>ğŸ”” Bildirimler</h2>
                <div class="card">
                    <h3>GerÃ§ek ZamanlÄ± Bildirimler</h3>
                    <p>WebSocket Ã¼zerinden gerÃ§ek zamanlÄ± bildirim sistemi. SipariÅŸ durumu deÄŸiÅŸiklikleri, stok gÃ¼ncellemeleri ve sistem bildirimleri iÃ§in kullanÄ±lÄ±r.</p>

                    <h4>Bildirim TÃ¼rleri</h4>
                    <ul>
                        <li>ğŸ›ï¸ SipariÅŸ Durumu DeÄŸiÅŸiklikleri</li>
                        <li>ğŸ“¦ Stok GÃ¼ncellemeleri</li>
                        <li>ğŸ’³ Ã–deme Bildirimleri</li>
                        <li>âš ï¸ Sistem Bildirimleri</li>
                    </ul>

                    <h4>WebSocket BaÄŸlantÄ±sÄ±</h4>
                    <pre><code class="language-typescript">import { io } from 'socket.io-client';

const socket = io('ws://localhost:3000', {
  extraHeaders: {
    Authorization: `Bearer ${jwtToken}`
  }
});

// Bildirim dinleme
socket.on('orderStatus', (data) => {
  console.log('SipariÅŸ durumu deÄŸiÅŸti:', data);
});

socket.on('stockUpdate', (data) => {
  console.log('Stok gÃ¼ncellendi:', data);
});

socket.on('paymentStatus', (data) => {
  console.log('Ã–deme durumu:', data);
});</code></pre>
                </div>
            </section>

            <section id="payment">
                <h2>ğŸ’³ Ã–deme</h2>
                <div class="card">
                    <h3>Stripe Ã–deme Ä°ÅŸlemleri</h3>
                    <p>Stripe entegrasyonu ile gÃ¼venli Ã¶deme iÅŸlemleri. Kredi kartÄ± Ã¶demeleri ve Ã¶deme takibi iÃ§in kullanÄ±lÄ±r.</p>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/payment/intent</span>
                        <span class="badge">Ã–deme niyeti oluÅŸtur</span>
                    </div>
                    <pre><code class="language-javascript">// Ã–rnek Request Body
{
  "amount": 1999.99,
  "currency": "try",
  "orderId": "123"
}

// Ã–rnek Response
{
  "clientSecret": "pi_3Mj8Yk..._secret_K2nL9",
  "paymentIntentId": "pi_3Mj8Yk..."
}</code></pre>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/payment/confirm</span>
                        <span class="badge">Ã–demeyi onayla</span>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <span class="path">/payment/webhook</span>
                        <span class="badge">Stripe Webhook</span>
                    </div>

                    <h4>Frontend Entegrasyonu</h4>
                    <pre><code class="language-javascript">// Stripe Elements kullanÄ±mÄ±
const stripe = Stripe('your_publishable_key');
const elements = stripe.elements();

const card = elements.create('card');
card.mount('#card-element');

// Ã–deme iÅŸlemi
const { paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
  payment_method: {
    card: card,
    billing_details: {
      name: 'MÃ¼ÅŸteri AdÄ±'
    }
  }
});</code></pre>

                    <div class="alert">
                        âš ï¸ Stripe test modunda Ã§alÄ±ÅŸÄ±rken test kartlarÄ± kullanÄ±n:
                        <ul>
                            <li>BaÅŸarÄ±lÄ± Ã¶deme: 4242 4242 4242 4242</li>
                            <li>BaÅŸarÄ±sÄ±z Ã¶deme: 4000 0000 0000 0002</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-typescript.min.js"></script>
</body>
</html> 